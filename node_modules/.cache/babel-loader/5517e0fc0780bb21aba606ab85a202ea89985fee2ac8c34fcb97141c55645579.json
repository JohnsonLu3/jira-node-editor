{"ast":null,"code":"var _jsxFileName = \"/Users/jolu/Documents/code/jira-node-editor/src/customization/CustomNode.tsx\";\nimport * as React from \"react\";\nimport { Presets } from \"rete-react-plugin\";\nimport styled, { css } from \"styled-components\";\nimport { $nodewidth, $socketmargin, $socketsize } from \"./vars\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  RefSocket,\n  RefControl\n} = Presets.classic;\nexport const NodeStyles = styled.div`\n  background: black;\n  border: 2px solid grey;\n  border-radius: 10px;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: ${props => Number.isFinite(props.width) ? `${props.width}px` : `${$nodewidth}px`};\n  height: ${props => Number.isFinite(props.height) ? `${props.height}px` : \"auto\"};\n  padding-bottom: 6px;\n  position: relative;\n  user-select: none;\n  &:hover {\n    background: #333;\n  }\n  ${props => props.selected && css`\n      border-color: red;\n    `}\n  .title {\n    color: white;\n    font-family: sans-serif;\n    font-size: 18px;\n    padding: 8px;\n  }\n  .output {\n    text-align: right;\n  }\n  .input {\n    text-align: left;\n  }\n  .output-socket {\n    text-align: right;\n    margin-right: -1px;\n    display: inline-block;\n  }\n  .input-socket {\n    text-align: left;\n    margin-left: -1px;\n    display: inline-block;\n  }\n  .input-title,\n  .output-title {\n    vertical-align: middle;\n    color: white;\n    display: inline-block;\n    font-family: sans-serif;\n    font-size: 14px;\n    margin: ${$socketmargin}px;\n    line-height: ${$socketsize}px;\n  }\n  .input-control {\n    z-index: 1;\n    width: calc(100% - ${$socketsize + 2 * $socketmargin}px);\n    vertical-align: middle;\n    display: inline-block;\n  }\n  .control {\n    display: block;\n    padding: ${$socketmargin}px ${$socketsize / 2 + $socketmargin}px;\n  }\n  ${props => props.styles && props.styles(props)}\n`;\n_c = NodeStyles;\nfunction sortByIndex(entries) {\n  entries.sort((a, b) => {\n    var _a$, _b$;\n    const ai = ((_a$ = a[1]) === null || _a$ === void 0 ? void 0 : _a$.index) || 0;\n    const bi = ((_b$ = b[1]) === null || _b$ === void 0 ? void 0 : _b$.index) || 0;\n    return ai - bi;\n  });\n}\nexport function CustomNode(props) {\n  const inputs = Object.entries(props.data.inputs);\n  const outputs = Object.entries(props.data.outputs);\n  const controls = Object.entries(props.data.controls);\n  const selected = props.data.selected || false;\n  const {\n    id,\n    label,\n    width,\n    height\n  } = props.data;\n  sortByIndex(inputs);\n  sortByIndex(outputs);\n  sortByIndex(controls);\n  return /*#__PURE__*/_jsxDEV(NodeStyles, {\n    selected: selected,\n    width: width,\n    height: height,\n    styles: props.styles,\n    \"data-testid\": \"node\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"title\",\n      \"data-testid\": \"title\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), outputs.map(([key, output]) => output && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"output\",\n      \"data-testid\": `output-${key}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"output-title\",\n        \"data-testid\": \"output-title\",\n        children: output === null || output === void 0 ? void 0 : output.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(RefSocket, {\n        name: \"output-socket\",\n        side: \"output\",\n        emit: props.emit,\n        socketKey: key,\n        nodeId: id,\n        payload: output.socket,\n        \"data-testid\": \"output-socket\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }, this)]\n    }, key, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this)), controls.map(([key, control]) => {\n      return control ? /*#__PURE__*/_jsxDEV(RefControl, {\n        name: \"control\",\n        emit: props.emit,\n        payload: control,\n        \"data-testid\": `control-${key}`\n      }, key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this) : null;\n    }), inputs.map(([key, input]) => input && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input\",\n      \"data-testid\": `input-${key}`,\n      children: [/*#__PURE__*/_jsxDEV(RefSocket, {\n        name: \"input-socket\",\n        emit: props.emit,\n        side: \"input\",\n        socketKey: key,\n        nodeId: id,\n        payload: input.socket,\n        \"data-testid\": \"input-socket\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }, this), input && (!input.control || !input.showControl) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-title\",\n        \"data-testid\": \"input-title\",\n        children: input === null || input === void 0 ? void 0 : input.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), (input === null || input === void 0 ? void 0 : input.control) && (input === null || input === void 0 ? void 0 : input.showControl) && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"input-control\",\n        children: /*#__PURE__*/_jsxDEV(RefControl, {\n          name: \"input-control\",\n          emit: props.emit,\n          payload: input.control,\n          \"data-testid\": \"input-control\"\n        }, key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this)]\n    }, key, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n_c2 = CustomNode;\nvar _c, _c2;\n$RefreshReg$(_c, \"NodeStyles\");\n$RefreshReg$(_c2, \"CustomNode\");","map":{"version":3,"names":["React","Presets","styled","css","$nodewidth","$socketmargin","$socketsize","jsxDEV","_jsxDEV","RefSocket","RefControl","classic","NodeStyles","div","props","Number","isFinite","width","height","selected","styles","_c","sortByIndex","entries","sort","a","b","_a$","_b$","ai","index","bi","CustomNode","inputs","Object","data","outputs","controls","id","label","children","className","fileName","_jsxFileName","lineNumber","columnNumber","map","key","output","name","side","emit","socketKey","nodeId","payload","socket","control","input","showControl","_c2","$RefreshReg$"],"sources":["/Users/jolu/Documents/code/jira-node-editor/src/customization/CustomNode.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { ClassicScheme, RenderEmit, Presets } from \"rete-react-plugin\";\nimport styled, { css } from \"styled-components\";\nimport { $nodewidth, $socketmargin, $socketsize } from \"./vars\";\n\nconst { RefSocket, RefControl } = Presets.classic;\n\ntype NodeExtraData = { width?: number; height?: number };\n\nexport const NodeStyles = styled.div<\n  NodeExtraData & { selected: boolean; styles?: (props: any) => any }\n>`\n  background: black;\n  border: 2px solid grey;\n  border-radius: 10px;\n  cursor: pointer;\n  box-sizing: border-box;\n  width: ${(props) =>\n    Number.isFinite(props.width) ? `${props.width}px` : `${$nodewidth}px`};\n  height: ${(props) =>\n    Number.isFinite(props.height) ? `${props.height}px` : \"auto\"};\n  padding-bottom: 6px;\n  position: relative;\n  user-select: none;\n  &:hover {\n    background: #333;\n  }\n  ${(props) =>\n    props.selected &&\n    css`\n      border-color: red;\n    `}\n  .title {\n    color: white;\n    font-family: sans-serif;\n    font-size: 18px;\n    padding: 8px;\n  }\n  .output {\n    text-align: right;\n  }\n  .input {\n    text-align: left;\n  }\n  .output-socket {\n    text-align: right;\n    margin-right: -1px;\n    display: inline-block;\n  }\n  .input-socket {\n    text-align: left;\n    margin-left: -1px;\n    display: inline-block;\n  }\n  .input-title,\n  .output-title {\n    vertical-align: middle;\n    color: white;\n    display: inline-block;\n    font-family: sans-serif;\n    font-size: 14px;\n    margin: ${$socketmargin}px;\n    line-height: ${$socketsize}px;\n  }\n  .input-control {\n    z-index: 1;\n    width: calc(100% - ${$socketsize + 2 * $socketmargin}px);\n    vertical-align: middle;\n    display: inline-block;\n  }\n  .control {\n    display: block;\n    padding: ${$socketmargin}px ${$socketsize / 2 + $socketmargin}px;\n  }\n  ${(props) => props.styles && props.styles(props)}\n`;\n\nfunction sortByIndex<T extends [string, undefined | { index?: number }][]>(\n  entries: T\n) {\n  entries.sort((a, b) => {\n    const ai = a[1]?.index || 0;\n    const bi = b[1]?.index || 0;\n\n    return ai - bi;\n  });\n}\n\ntype Props<S extends ClassicScheme> = {\n  data: S[\"Node\"] & NodeExtraData;\n  styles?: () => any;\n  emit: RenderEmit<S>;\n};\nexport type NodeComponent<Scheme extends ClassicScheme> = (\n  props: Props<Scheme>\n) => JSX.Element;\n\nexport function CustomNode<Scheme extends ClassicScheme>(props: Props<Scheme>) {\n  const inputs = Object.entries(props.data.inputs);\n  const outputs = Object.entries(props.data.outputs);\n  const controls = Object.entries(props.data.controls);\n  const selected = props.data.selected || false;\n  const { id, label, width, height } = props.data;\n\n  sortByIndex(inputs);\n  sortByIndex(outputs);\n  sortByIndex(controls);\n\n  return (\n    <NodeStyles\n      selected={selected}\n      width={width}\n      height={height}\n      styles={props.styles}\n      data-testid=\"node\"\n    >\n      <div className=\"title\" data-testid=\"title\">\n        {label}\n      </div>\n      {/* Outputs */}\n      {outputs.map(\n        ([key, output]) =>\n          output && (\n            <div className=\"output\" key={key} data-testid={`output-${key}`}>\n              <div className=\"output-title\" data-testid=\"output-title\">\n                {output?.label}\n              </div>\n              <RefSocket\n                name=\"output-socket\"\n                side=\"output\"\n                emit={props.emit}\n                socketKey={key}\n                nodeId={id}\n                payload={output.socket}\n                data-testid=\"output-socket\"\n              />\n            </div>\n          )\n      )}\n      {/* Controls */}\n      {controls.map(([key, control]) => {\n        return control ? (\n          <RefControl\n            key={key}\n            name=\"control\"\n            emit={props.emit}\n            payload={control}\n            data-testid={`control-${key}`}\n          />\n        ) : null;\n      })}\n      {/* Inputs */}\n      {inputs.map(\n        ([key, input]) =>\n          input && (\n            <div className=\"input\" key={key} data-testid={`input-${key}`}>\n              <RefSocket\n                name=\"input-socket\"\n                emit={props.emit}\n                side=\"input\"\n                socketKey={key}\n                nodeId={id}\n                payload={input.socket}\n                data-testid=\"input-socket\"\n              />\n              {input && (!input.control || !input.showControl) && (\n                <div className=\"input-title\" data-testid=\"input-title\">\n                  {input?.label}\n                </div>\n              )}\n              {input?.control && input?.showControl && (\n                <span className=\"input-control\">\n                  <RefControl\n                    key={key}\n                    name=\"input-control\"\n                    emit={props.emit}\n                    payload={input.control}\n                    data-testid=\"input-control\"\n                  />\n                </span>\n              )}\n            </div>\n          )\n      )}\n    </NodeStyles>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}