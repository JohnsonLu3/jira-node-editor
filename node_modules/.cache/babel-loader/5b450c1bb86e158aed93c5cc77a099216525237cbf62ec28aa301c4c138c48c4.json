{"ast":null,"code":"import { ClassicPreset as Classic, NodeEditor } from 'rete';\nimport { AreaPlugin } from 'rete-area-plugin';\nimport { ConnectionPlugin, Presets as ConnectionPresets } from 'rete-connection-plugin';\nimport { ReactPlugin, Presets as ReactPresets } from 'rete-react-plugin';\nimport { createRoot } from 'react-dom/client';\nimport { ScopesPlugin, Presets as ScopesPresets } from 'rete-scopes-plugin';\nconst socket = new Classic.Socket('socket');\nclass Node extends Classic.Node {\n  constructor(...args) {\n    super(...args);\n    this.width = 180;\n    this.height = 120;\n    this.parent = void 0;\n  }\n}\nclass NodeA extends Node {\n  constructor() {\n    super('A');\n    this.addControl('a', new Classic.InputControl('text', {\n      initial: 'a'\n    }));\n    this.addOutput('port', new Classic.Output(socket));\n  }\n}\nclass NodeB extends Node {\n  constructor() {\n    super('B');\n    this.addControl('b', new Classic.InputControl('text', {\n      initial: 'b'\n    }));\n    this.addInput('port', new Classic.Input(socket));\n  }\n}\nclass NodeParent extends Node {\n  constructor() {\n    super('Parent');\n    this.addInput('port', new Classic.Input(socket));\n    this.addOutput('port', new Classic.Output(socket));\n  }\n}\nclass Connection extends Classic.Connection {}\nexport async function createEditor(container) {\n  const editor = new NodeEditor();\n  const area = new AreaPlugin(container);\n  const connection = new ConnectionPlugin();\n  const reactRender = new ReactPlugin({\n    createRoot\n  });\n  const scopes = new ScopesPlugin();\n  reactRender.addPreset(ReactPresets.classic.setup());\n  connection.addPreset(ConnectionPresets.classic.setup());\n  scopes.addPreset(ScopesPresets.classic.setup());\n  editor.use(area);\n  area.use(connection);\n  area.use(reactRender);\n  area.use(scopes);\n  const parent1 = new NodeParent();\n  const b2 = new NodeB();\n  const parent3 = new NodeParent();\n  const a = new NodeA();\n  const b = new NodeB();\n  a.parent = parent1.id;\n  b.parent = parent1.id;\n  parent1.parent = parent3.id;\n  b2.parent = parent3.id;\n  await editor.addNode(parent3);\n  await editor.addNode(parent1);\n  await editor.addNode(b2);\n  await editor.addNode(a);\n  await editor.addNode(b);\n  await editor.addConnection(new Classic.Connection(a, 'port', b, 'port'));\n  await editor.addConnection(new Classic.Connection(parent1, 'port', b2, 'port'));\n  await area.translate(a.id, {\n    x: 66,\n    y: 106\n  });\n  await area.translate(b.id, {\n    x: 296,\n    y: 71\n  });\n  await area.translate(b2.id, {\n    x: 538,\n    y: 24\n  });\n  return {\n    destroy: () => area.destroy()\n  };\n}","map":{"version":3,"names":["ClassicPreset","Classic","NodeEditor","AreaPlugin","ConnectionPlugin","Presets","ConnectionPresets","ReactPlugin","ReactPresets","createRoot","ScopesPlugin","ScopesPresets","socket","Socket","Node","constructor","args","width","height","parent","NodeA","addControl","InputControl","initial","addOutput","Output","NodeB","addInput","Input","NodeParent","Connection","createEditor","container","editor","area","connection","reactRender","scopes","addPreset","classic","setup","use","parent1","b2","parent3","a","b","id","addNode","addConnection","translate","x","y","destroy"],"sources":["/Users/jolu/Documents/code/jira-node-editor/src/rete/scopes.ts"],"sourcesContent":["import { ClassicPreset as Classic, GetSchemes, NodeEditor } from 'rete';\n\nimport { Area2D, AreaPlugin } from 'rete-area-plugin';\nimport {\n  ConnectionPlugin,\n  Presets as ConnectionPresets,\n} from 'rete-connection-plugin';\nimport {\n  ReactPlugin,\n  ReactArea2D,\n  Presets as ReactPresets,\n} from 'rete-react-plugin';\nimport { createRoot } from 'react-dom/client';\n\nimport { ScopesPlugin, Presets as ScopesPresets } from 'rete-scopes-plugin';\n\nconst socket = new Classic.Socket('socket');\n\nclass Node extends Classic.Node {\n  width = 180;\n  height = 120;\n  parent?: string;\n}\n\nclass NodeA extends Node {\n  constructor() {\n    super('A');\n\n    this.addControl('a', new Classic.InputControl('text', { initial: 'a' }));\n    this.addOutput('port', new Classic.Output(socket));\n  }\n}\n\nclass NodeB extends Node {\n  constructor() {\n    super('B');\n\n    this.addControl('b', new Classic.InputControl('text', { initial: 'b' }));\n    this.addInput('port', new Classic.Input(socket));\n  }\n}\n\nclass NodeParent extends Node {\n  constructor() {\n    super('Parent');\n\n    this.addInput('port', new Classic.Input(socket));\n    this.addOutput('port', new Classic.Output(socket));\n  }\n}\n\nclass Connection<A extends Node, B extends Node> extends Classic.Connection<\n  A,\n  B\n> {}\n\ntype Schemes = GetSchemes<Node, Connection<Node, Node>>;\ntype AreaExtra = Area2D<Schemes> | ReactArea2D<Schemes>;\n\nexport async function createEditor(container: HTMLElement) {\n  const editor = new NodeEditor<Schemes>();\n  const area = new AreaPlugin<Schemes, AreaExtra>(container);\n  const connection = new ConnectionPlugin<Schemes, AreaExtra>();\n  const reactRender = new ReactPlugin<Schemes, AreaExtra>({ createRoot });\n\n  const scopes = new ScopesPlugin<Schemes>();\n\n  reactRender.addPreset(ReactPresets.classic.setup());\n\n  connection.addPreset(ConnectionPresets.classic.setup());\n\n  scopes.addPreset(ScopesPresets.classic.setup());\n\n  editor.use(area);\n\n  area.use(connection);\n  area.use(reactRender);\n\n  area.use(scopes);\n\n  const parent1 = new NodeParent();\n  const b2 = new NodeB();\n  const parent3 = new NodeParent();\n  const a = new NodeA();\n  const b = new NodeB();\n\n  a.parent = parent1.id;\n  b.parent = parent1.id;\n  parent1.parent = parent3.id;\n  b2.parent = parent3.id;\n\n  await editor.addNode(parent3);\n  await editor.addNode(parent1);\n  await editor.addNode(b2);\n  await editor.addNode(a);\n  await editor.addNode(b);\n\n  await editor.addConnection(new Classic.Connection(a, 'port', b, 'port'));\n  await editor.addConnection(\n    new Classic.Connection(parent1, 'port', b2, 'port')\n  );\n\n  await area.translate(a.id, { x: 66, y: 106 });\n  await area.translate(b.id, { x: 296, y: 71 });\n  await area.translate(b2.id, { x: 538, y: 24 });\n\n  return {\n    destroy: () => area.destroy(),\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}