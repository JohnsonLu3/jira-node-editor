{"ast":null,"code":"import { ClassicPreset as Classic, NodeEditor } from 'rete';\nimport { AreaPlugin } from 'rete-area-plugin';\nimport { ConnectionPlugin, Presets as ConnectionPresets } from 'rete-connection-plugin';\nimport { ReactPlugin, Presets as ReactPresets } from 'rete-react-plugin';\nimport { createRoot } from 'react-dom/client';\nclass Connection extends Classic.Connection {}\nclass NumberNode extends Classic.Node {\n  constructor(initial, change) {\n    super('Number');\n    this.addOutput('value', new Classic.Output(socket, 'Number'));\n    this.addControl('value', new Classic.InputControl('number', {\n      initial,\n      change\n    }));\n  }\n}\nclass AddNode extends Classic.Node {\n  constructor() {\n    super('Add');\n    this.addInput('a', new Classic.Input(socket, 'A'));\n    this.addInput('b', new Classic.Input(socket, 'B'));\n    this.addOutput('value', new Classic.Output(socket, 'Number'));\n    this.addControl('result', new Classic.InputControl('number', {\n      initial: 0,\n      readonly: true\n    }));\n  }\n}\nconst socket = new Classic.Socket('socket');\nexport async function createEditor(container) {\n  var _area$nodeViews$get, _area$nodeViews$get2, _area$nodeViews$get3;\n  const editor = new NodeEditor();\n  const area = new AreaPlugin(container);\n  const connection = new ConnectionPlugin();\n  const reactRender = new ReactPlugin({\n    createRoot\n  });\n  editor.use(area);\n  area.use(reactRender);\n  area.use(connection);\n  connection.addPreset(ConnectionPresets.classic.setup());\n  reactRender.addPreset(ReactPresets.classic.setup());\n  const a = new NumberNode(1);\n  const b = new NumberNode(1);\n  const add = new AddNode();\n  await editor.addNode(a);\n  await editor.addNode(b);\n  await editor.addNode(add);\n  await editor.addConnection(new Connection(a, 'value', add, 'a'));\n  await editor.addConnection(new Connection(b, 'value', add, 'b'));\n  await ((_area$nodeViews$get = area.nodeViews.get(a.id)) === null || _area$nodeViews$get === void 0 ? void 0 : _area$nodeViews$get.translate(100, 100));\n  await ((_area$nodeViews$get2 = area.nodeViews.get(b.id)) === null || _area$nodeViews$get2 === void 0 ? void 0 : _area$nodeViews$get2.translate(100, 300));\n  await ((_area$nodeViews$get3 = area.nodeViews.get(add.id)) === null || _area$nodeViews$get3 === void 0 ? void 0 : _area$nodeViews$get3.translate(400, 150));\n  return {\n    destroy: () => area.destroy()\n  };\n}","map":{"version":3,"names":["ClassicPreset","Classic","NodeEditor","AreaPlugin","ConnectionPlugin","Presets","ConnectionPresets","ReactPlugin","ReactPresets","createRoot","Connection","NumberNode","Node","constructor","initial","change","addOutput","Output","socket","addControl","InputControl","AddNode","addInput","Input","readonly","Socket","createEditor","container","_area$nodeViews$get","_area$nodeViews$get2","_area$nodeViews$get3","editor","area","connection","reactRender","use","addPreset","classic","setup","a","b","add","addNode","addConnection","nodeViews","get","id","translate","destroy"],"sources":["/Users/jolu/Documents/code/jira-node-editor/src/rete/default.ts"],"sourcesContent":["import { ClassicPreset as Classic, GetSchemes, NodeEditor } from 'rete';\n\nimport { Area2D, AreaPlugin } from 'rete-area-plugin';\nimport {\n  ConnectionPlugin,\n  Presets as ConnectionPresets,\n} from 'rete-connection-plugin';\nimport {\n  ReactPlugin,\n  ReactArea2D,\n  Presets as ReactPresets,\n} from 'rete-react-plugin';\nimport { createRoot } from 'react-dom/client';\n\ntype Node = NumberNode | AddNode;\ntype Conn =\n  | Connection<NumberNode, AddNode>\n  | Connection<AddNode, AddNode>\n  | Connection<AddNode, NumberNode>;\ntype Schemes = GetSchemes<Node, Conn>;\n\nclass Connection<A extends Node, B extends Node> extends Classic.Connection<\n  A,\n  B\n> {}\n\nclass NumberNode extends Classic.Node {\n  constructor(initial: number, change?: (value: number) => void) {\n    super('Number');\n\n    this.addOutput('value', new Classic.Output(socket, 'Number'));\n    this.addControl(\n      'value',\n      new Classic.InputControl('number', { initial, change })\n    );\n  }\n}\n\nclass AddNode extends Classic.Node {\n  constructor() {\n    super('Add');\n\n    this.addInput('a', new Classic.Input(socket, 'A'));\n    this.addInput('b', new Classic.Input(socket, 'B'));\n    this.addOutput('value', new Classic.Output(socket, 'Number'));\n    this.addControl(\n      'result',\n      new Classic.InputControl('number', { initial: 0, readonly: true })\n    );\n  }\n}\n\ntype AreaExtra = Area2D<Schemes> | ReactArea2D<Schemes>;\n\nconst socket = new Classic.Socket('socket');\n\nexport async function createEditor(container: HTMLElement) {\n  const editor = new NodeEditor<Schemes>();\n  const area = new AreaPlugin<Schemes, AreaExtra>(container);\n  const connection = new ConnectionPlugin<Schemes, AreaExtra>();\n  const reactRender = new ReactPlugin<Schemes, AreaExtra>({ createRoot });\n\n  editor.use(area);\n\n  area.use(reactRender);\n\n  area.use(connection);\n\n  connection.addPreset(ConnectionPresets.classic.setup());\n  reactRender.addPreset(ReactPresets.classic.setup());\n\n  const a = new NumberNode(1);\n  const b = new NumberNode(1);\n  const add = new AddNode();\n\n  await editor.addNode(a);\n  await editor.addNode(b);\n  await editor.addNode(add);\n\n  await editor.addConnection(new Connection(a, 'value', add, 'a'));\n  await editor.addConnection(new Connection(b, 'value', add, 'b'));\n\n  await area.nodeViews.get(a.id)?.translate(100, 100);\n  await area.nodeViews.get(b.id)?.translate(100, 300);\n  await area.nodeViews.get(add.id)?.translate(400, 150);\n\n  return {\n    destroy: () => area.destroy(),\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}